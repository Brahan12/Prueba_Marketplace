{"ast":null,"code":"import { ngxCsv } from 'ngx-csv/ngx-csv';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/producto/productos.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\n\nfunction DetalleComponent_div_24_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 27)(1, \"div\", 28)(2, \"div\", 29)(3, \"p\", 30);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"span\", 31);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(7, \"svg\", 32);\n    i0.ɵɵlistener(\"click\", function DetalleComponent_div_24_div_1_Template__svg_svg_click_7_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const item_r4 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r5.eliminar(item_r4.id));\n    });\n    i0.ɵɵelement(8, \"path\", 33);\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const item_r4 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(item_r4.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r4.price);\n  }\n}\n\nfunction DetalleComponent_div_24_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, DetalleComponent_div_24_div_1_Template, 9, 2, \"div\", 23);\n    i0.ɵɵelementStart(2, \"div\", 24)(3, \"h3\");\n    i0.ɵɵtext(4, \"Total:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"span\", 25);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"button\", 26);\n    i0.ɵɵlistener(\"click\", function DetalleComponent_div_24_Template_button_click_7_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.descargarCSV());\n    });\n    i0.ɵɵtext(8, \"Exportar datos\");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.agregarCarritoFinal);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r0.totalProductos);\n  }\n}\n\nfunction DetalleComponent_div_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 34)(1, \"p\");\n    i0.ɵɵtext(2, \"Carrito vacio\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction DetalleComponent_div_27_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 35)(1, \"h1\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"h3\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"img\", 36);\n    i0.ɵɵelementStart(6, \"p\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"p\");\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"button\", 37);\n    i0.ɵɵlistener(\"click\", function DetalleComponent_div_27_Template_button_click_10_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r11);\n      const item_r9 = restoredCtx.$implicit;\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.getCarrito(item_r9));\n    });\n    i0.ɵɵtext(11, \"A\\u00F1adir al carrito\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"button\", 38);\n    i0.ɵɵlistener(\"click\", function DetalleComponent_div_27_Template_button_click_12_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r11);\n      const item_r9 = restoredCtx.$implicit;\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.eliminar(item_r9.id));\n    });\n    i0.ɵɵtext(13, \"Eliminar del carrito\");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const item_r9 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r9.category);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r9.title);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"src\", item_r9.image, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r9.description);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r9.price);\n  }\n}\n\nexport let DetalleComponent = /*#__PURE__*/(() => {\n  class DetalleComponent {\n    constructor(servicesProductos, router, actRoute) {\n      this.servicesProductos = servicesProductos;\n      this.router = router;\n      this.actRoute = actRoute;\n      this.detalleProducto = [];\n      this.agregarCarrito = [];\n      this.cont = 0;\n      this.totalProductos = 0;\n      this.vacio = false;\n      this.data = [];\n      this.datosCarro = [];\n      this.contProducto = 0;\n      this.producto = [];\n      this.agregarCarritoFinal = [];\n      this.unicos = [];\n      this.agregarCarritoi = [];\n      this.id = Number(this.actRoute.snapshot.params['id']);\n    }\n\n    ngOnInit() {\n      this.idDetalleProducto();\n      this.data = sessionStorage.getItem('datos');\n      this.datosCarro = JSON.parse(this.data);\n\n      if (this.datosCarro != null) {\n        this.agregarCarrito = this.datosCarro;\n\n        for (let index = 0; index < this.datosCarro.length; index++) {\n          const element = this.datosCarro[index];\n          this.cont++;\n          this.totalProductos += element.price;\n\n          if (!this.unicos.includes(element.id)) {\n            this.agregarCarritoFinal.push(element);\n            this.unicos.push(element.id);\n          }\n        }\n      }\n    }\n\n    idDetalleProducto() {\n      this.servicesProductos.idProductos(this.id).toPromise().then(resp => {\n        this.producto.push(resp);\n      });\n    }\n\n    desplegableCarrito() {\n      if ($('.hidden-cart').css('display') == 'none') {\n        $('.hidden-cart').css('display', 'block');\n\n        if (this.cont == 0) {\n          this.vacio = true;\n        } else {\n          this.vacio = false;\n        }\n      } else {\n        $('.hidden-cart').css('display', 'none');\n      }\n    }\n\n    getCarrito(data) {\n      this.servicesProductos.obtenerProductos().toPromise().then(resp => {\n        for (let index = 0; index < resp.length; index++) {\n          const element = resp[index];\n\n          if (element.id == data.id) {\n            this.cont++;\n            this.agregarCarrito.push(element);\n            this.totalProductos += element.price;\n            sessionStorage.setItem('datos', JSON.stringify(this.agregarCarrito));\n\n            for (let i = 0; i < this.agregarCarrito.length; i++) {\n              const element2 = this.agregarCarrito[i];\n\n              if (element.id === element2.id) {\n                if (!this.unicos.includes(element2.id)) {\n                  this.agregarCarritoFinal.push(element2);\n                  this.unicos.push(element2.id);\n                }\n              }\n            }\n          }\n        }\n      });\n    }\n\n    descargarCSV() {\n      const options = {\n        title: 'Productos',\n        fieldSeparator: ',',\n        quoteStrings: '\"',\n        decimalseparator: '.',\n        showLabels: false,\n        noDownload: false,\n        showTitle: false,\n        useBom: false,\n        headers: ['ID', 'Titulo', 'Precio', 'Descripcion', 'Categoria', 'Imagen']\n      };\n      new ngxCsv(this.agregarCarrito, \"reporte\", options);\n      $('.hidden-cart').css('display', 'none');\n    }\n\n    eliminar(id) {\n      for (let index = 0; index < this.agregarCarritoFinal.length; index++) {\n        if (this.agregarCarritoFinal[index].id == id) {\n          if (this.agregarCarritoFinal.length == 1) {\n            this.cont = 0;\n          }\n\n          this.agregarCarritoFinal.splice(index, 1);\n\n          for (let i = 0; i < this.agregarCarrito.length; i++) {\n            const element = this.agregarCarrito[i];\n\n            if (id == element.id) {\n              this.cont--;\n              this.totalProductos -= this.agregarCarrito[i].price;\n              this.agregarCarrito.splice(i, 1);\n            }\n          }\n\n          break;\n        }\n\n        ;\n      }\n\n      if (this.agregarCarritoFinal.length > 0) {\n        for (let i = 0; i < this.agregarCarrito.length; i++) {\n          const element = this.agregarCarrito[i];\n\n          if (element.id == id) {\n            this.totalProductos -= this.agregarCarrito[i].price;\n            this.cont--;\n            this.agregarCarrito.splice(i, 1);\n            sessionStorage.setItem('datos', JSON.stringify(this.agregarCarrito));\n          }\n        }\n      }\n\n      if (this.agregarCarritoFinal.length == 0) {\n        sessionStorage.removeItem('datos');\n        window.location.reload();\n      }\n    }\n\n    menu() {\n      this.router.navigateByUrl('');\n    }\n\n  }\n\n  DetalleComponent.ɵfac = function DetalleComponent_Factory(t) {\n    return new (t || DetalleComponent)(i0.ɵɵdirectiveInject(i1.ProductosService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i2.ActivatedRoute));\n  };\n\n  DetalleComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: DetalleComponent,\n    selectors: [[\"app-detalle\"]],\n    decls: 32,\n    vars: 4,\n    consts: [[1, \"content\"], [1, \"header\"], [1, \"navegacion\"], [1, \"menu\"], [1, \"menuIcon\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"viewBox\", \"0 0 448 512\", 1, \"menuIcon\"], [\"d\", \"M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z\"], [1, \"menuLetras\"], [1, \"submenu\"], [3, \"click\"], [1, \"title\", 3, \"click\"], [1, \"container-icon\"], [1, \"container-cart-icon\", 3, \"click\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"fill\", \"none\", \"viewBox\", \"0 0 24 24\", \"stroke-width\", \"1.5\", \"stroke\", \"currentColor\", 1, \"icon-cart\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"d\", \"M15.75 10.5V6a3.75 3.75 0 10-7.5 0v4.5m11.356-1.993l1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 01-1.12-1.243l1.264-12A1.125 1.125 0 015.513 7.5h12.974c.576 0 1.059.435 1.119 1.007zM8.625 10.5a.375.375 0 11-.75 0 .375.375 0 01.75 0zm7.5 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z\"], [1, \"count-products\"], [\"id\", \"contador-productos\"], [1, \"container-cart-products\", \"hidden-cart\"], [4, \"ngIf\"], [\"class\", \"vacio\", 4, \"ngIf\"], [1, \"containerDetalle\"], [\"class\", \"detalleCard\", 4, \"ngFor\", \"ngForOf\"], [1, \"contentFooter\"], [\"class\", \"row-product\", 4, \"ngFor\", \"ngForOf\"], [1, \"cart-total\"], [1, \"total-pagar\"], [1, \"exportaDatos\", 3, \"click\"], [1, \"row-product\"], [1, \"cart-product\"], [1, \"info-cart-product\"], [1, \"titulo-producto-carrito\"], [1, \"precio-producto-carrito\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"fill\", \"none\", \"viewBox\", \"0 0 24 24\", \"stroke-width\", \"1.5\", \"stroke\", \"currentColor\", 1, \"icon-close\", 3, \"click\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"d\", \"M6 18L18 6M6 6l12 12\"], [1, \"vacio\"], [1, \"detalleCard\"], [\"alt\", \"\", \"width\", \"150px\", 3, \"src\"], [1, \"btn-cart\", 3, \"click\"], [1, \"btn-delete\", 3, \"click\"]],\n    template: function DetalleComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"nav\", 2)(3, \"ul\", 3)(4, \"li\")(5, \"a\", 4);\n        i0.ɵɵnamespaceSVG();\n        i0.ɵɵelementStart(6, \"svg\", 5);\n        i0.ɵɵelement(7, \"path\", 6);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵnamespaceHTML();\n        i0.ɵɵelementStart(8, \"a\", 7);\n        i0.ɵɵtext(9, \"Productos\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"ul\", 8)(11, \"li\")(12, \"a\", 9);\n        i0.ɵɵlistener(\"click\", function DetalleComponent_Template_a_click_12_listener() {\n          return ctx.menu();\n        });\n        i0.ɵɵtext(13, \"Total productos\");\n        i0.ɵɵelementEnd()()()()()();\n        i0.ɵɵelementStart(14, \"h1\", 10);\n        i0.ɵɵlistener(\"click\", function DetalleComponent_Template_h1_click_14_listener() {\n          return ctx.menu();\n        });\n        i0.ɵɵtext(15, \"Bank Inc\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"div\", 11)(17, \"div\", 12);\n        i0.ɵɵlistener(\"click\", function DetalleComponent_Template_div_click_17_listener() {\n          return ctx.desplegableCarrito();\n        });\n        i0.ɵɵnamespaceSVG();\n        i0.ɵɵelementStart(18, \"svg\", 13);\n        i0.ɵɵelement(19, \"path\", 14);\n        i0.ɵɵelementEnd();\n        i0.ɵɵnamespaceHTML();\n        i0.ɵɵelementStart(20, \"div\", 15)(21, \"span\", 16);\n        i0.ɵɵtext(22);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(23, \"div\", 17);\n        i0.ɵɵtemplate(24, DetalleComponent_div_24_Template, 9, 2, \"div\", 18);\n        i0.ɵɵtemplate(25, DetalleComponent_div_25_Template, 3, 0, \"div\", 19);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(26, \"div\", 20);\n        i0.ɵɵtemplate(27, DetalleComponent_div_27_Template, 14, 5, \"div\", 21);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(28, \"div\")(29, \"footer\", 22)(30, \"p\");\n        i0.ɵɵtext(31, \"2023 Back Inc\");\n        i0.ɵɵelementEnd()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(22);\n        i0.ɵɵtextInterpolate(ctx.cont);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", !ctx.vacio);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.vacio);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.producto);\n      }\n    },\n    dependencies: [i3.NgForOf, i3.NgIf],\n    styles: [\".containerDetalle[_ngcontent-%COMP%]{width:55%;margin:4em 24%;border-radius:20px;box-shadow:0 0 15px 5px #4c4ce994}.detalleCard[_ngcontent-%COMP%]{text-align:center}.detalleCard[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{padding:15px}.detalleCard[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.2)}.detalleCard[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{padding-top:1em;color:#333}.detalleCard[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]:hover{background-color:#fff;border-radius:20px;cursor:auto}.detalleCard[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:50%;font-weight:600;margin:1em 25%}.detalleCard[_ngcontent-%COMP%]   .btn-cart[_ngcontent-%COMP%], .detalleCard[_ngcontent-%COMP%]   .btn-delete[_ngcontent-%COMP%]{background-color:#181fd6;color:#fff;border:0;outline:none;padding:9px 29px;font-size:16px;font-weight:600;border-radius:16px;margin-bottom:2em;cursor:pointer}.detalleCard[_ngcontent-%COMP%]   .btn-delete[_ngcontent-%COMP%]{margin-left:2em;background-color:#dd2130fd}.detalleCard[_ngcontent-%COMP%]   .btn-cart[_ngcontent-%COMP%]:hover{background-color:#181ed6b4}.detalleCard[_ngcontent-%COMP%]   .btn-delete[_ngcontent-%COMP%]:hover{background-color:#dd2131a4}.vacio[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:5px;text-align:center;font-weight:600}@media screen and (min-width: 1600px){.containerDetalle[_ngcontent-%COMP%]{margin:18.5em 24%}}@media screen and (max-width: 768px){.containerDetalle[_ngcontent-%COMP%]{width:65%;margin:4em 19%}}@media screen and (max-width: 425px){.detalleCard[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:70%;font-weight:600;margin:1em 14%}.containerDetalle[_ngcontent-%COMP%]{width:87%;margin:4em 6%}.detalleCard[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{width:89%;margin:1em auto}.detalleCard[_ngcontent-%COMP%]   .btn-delete[_ngcontent-%COMP%]{margin-left:0}}@media screen and (max-width: 375px){.containerDetalle[_ngcontent-%COMP%]{width:87%;margin:4em 6%}}@media screen and (max-width: 320px){.containerDetalle[_ngcontent-%COMP%]{width:92%;margin:4em 4%}}\"]\n  });\n  return DetalleComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}